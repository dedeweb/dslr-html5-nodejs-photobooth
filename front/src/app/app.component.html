<video autoplay [srcObject]="currentStream"></video>

<div class="capture-area">
	<canvas id="displayCanvas" [ngClass]="{ 
	'blurred': 
	currentCaptureState == captureState.displayError || 
	currentCaptureState == captureState.displayPicture ||
	currentCaptureState == captureState.waitForImage}"></canvas>
	<canvas id="getImgCanvas"></canvas>
	
	<div class="area-capture-control" *ngIf="currentCaptureState == captureState.waitForInput">
		<a class="capture-button" (click)="launchCountDown()">
			<i class="fa fa-camera"></i>
		</a>
		<div class="arrow-tip">
			<i class="fa fa-hand-o-up"></i>
		</div>
		<div class="bottom-message">
			{{ 'picture_button_help' | translate}}
		</div>
	</div>
	<div class="area-countdown" *ngIf="currentCaptureState == captureState.countDown">
		<photo-countdown (onTriggerCapture)="capturePicture()" (onFinish)="waitCapture()"></photo-countdown>
	</div>
	<div class="area-wait-img" *ngIf="currentCaptureState == captureState.waitForImage">
		<div class="spinner"></div>
	</div>
	<div class="area-display-img" 
		[ngClass]="{'animate' : 'currentCaptureState == captureState.displayPicture'}" 
		*ngIf="currentCaptureState == captureState.displayPicture">
		<!--<div id="cameraImage" [ngStyle]="{ 'background-image': 'url(' + capturedImage + ')'}">
		</div>-->
		<countdown class="countdown-print" duration="20" startAfter="3" (onComplete)="restart()" ></countdown>
		<img id="cameraImage" [src]="capturedImage" />
		<div class="capture-actions">
			<button class="booth-button" type="button" (click)="restart()">
				<i class="fa fa-repeat" aria-hidden="true"></i>
				{{ 'restart' | translate}}
			</button>
			<button class="booth-button" type="button" (click)="displayPrintChoice()">
				<i class="fa fa-print" aria-hidden="true"></i>
				{{ 'print' | translate}}
			</button>
		</div>
	</div>
	<div class="area-print-choice" *ngIf="currentCaptureState == captureState.printChoice">
		<div class="image-area">
			<img id="cameraImagePrint" [src]="capturedImage" />
		</div>
		<div class="control-area">
			<countdown class="countdown-print-choice" duration="10" theme="dark" (onComplete)="restart()" ></countdown>
			<h1>{{ 'numberOfCopies' | translate}} : </h1>
			<button *ngFor="let i of arrayCopies" class="booth-button nber-copies-btn" type="button" (click)="printPicture(i)">{{i}}</button>
			<br/>
			<button class="booth-button cancel-button" type="button" (click)="restart()">
				<i class="fa fa-ban"></i>
				{{ 'cancel' | translate}}
			</button>
		</div>
	</div>
	<div class="area-display-error" *ngIf="currentCaptureState == captureState.displayError">
		<div class="error-panel">
			<i class="fa fa-exclamation-triangle"></i>
			<span class="error-message">
				{{ 'generic_error_message' | translate}}
			</span>
			<br/>
			<button class="booth-button restart-button" type="button" (click)="reloadPage()">
				<i class="fa fa-repeat" aria-hidden="true"></i>
				{{ 'retry' | translate}}
			</button>
		</div>
	</div>
</div>
